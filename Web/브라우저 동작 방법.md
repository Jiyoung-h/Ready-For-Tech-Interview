# 브라우저 동작 방법

## 브라우저 주요 기능

- 사용자가 선택한 자원을 서버에 요청하여 브라우저에 표시
- 자원은 html 문서, pdf, image 등 다양한 형태
- 자원의 주소는 URI에 의해 정해짐


## 브라우저 기본 구조

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png">

- **사용자 인터페이스** : 주소표시줄, 이전/다음 버튼, 북마크 등 사용자가 활용하는 서비스
- **브라우저 엔진** : 사용자 인터페이스와 렌더링 엔진 사이의 동작 제어
- **렌더링 엔진** : 요청한 콘텐츠를 화면에 표시
- **통신** : http 요청과 같은 네트워크 호출에 사용
- **UI 백엔드** : 플랫폼에서 명시하지 않은 일반적 인터페이스
- **자바스크립트 해석기**
- **자료 저장소** : 쿠키 등 모든 종류의 자원을 하드 디스크에 저장하는 계층


## 렌더링
- 렌더링 엔진은 요청받은 내용을 브라우저 화면에 표시
- 기본적으로 html, xml 문서와 이미지를 표시
- 추가 플러그인이나 브라우저 확장 기능으로 다른 유형도 표시 가능

### 렌더링 엔진 종류

- 게코(Gecko) 엔진 (파이어폭스)
- 웹킷(Webkit) : 최초 리눅스 플랫폼에 동작하기 위한 오픈소스 엔진 (크롬, 사파리)
  - 동작 과정
  <br>
  <img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png">
  <br>
1. html 문서 파싱
2. 콘텐츠 트리 내부에서 태그를 모두 DOM 노드로 변환
3. 외부 CSS 파일과 함께 포함된 스타일 요소 파싱
4. 스타일 정보와 html 표시 규칙은 ``렌더 트리``라는 또 다른 트리를 생성
5. 렌더 트리는 정해진 순서대로 화면에 표시
6. UI 백엔드에서 렌더 트리의 각 노드를 가로지으며 형상을 만드는 그리기 과정 진행
7. 렌더링 엔진은 좀 더 빠르게 사용자에게 제공하기 위해 모든 html을 파싱할 때 까지 기다리지 않고 배치와
  그리기 과정을 시작
  <br>
  
**DOM**  : Document Object Model(문서 객체 모델)

- html 태그들을 JavaScript가 활용할 수 있는 객체로 만들면 문서객체가 된다.

- **DOM** 은 웹 브라우저가 html 페이지를 인식하는 방식을 말한다. (트리구조)

  <br>
  <img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-3.png">
  
  ***어태치먼트*** : 웹킷이 렌더 트리를 생성하기 위해 DOM 노드와 스타일 정보를 연결하는 과정
  
  ## 파싱과 DOM 트리 구축
  
  ### 파싱(Parsing)
  
  - 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 것 
  - 서버로부터 받은 문서를 어휘 분석, 구문 분석 과정을 거쳐 브라우저가 이해하기 쉽게 사용할 수 있는
  파싱 트리(DOM 트리구조) 를 구축
  
  
  ## 요약
  
1. 주소창에 url을 입력 -> 서버에 요청이 전송
2. 해당 페이지에 존재하는 여러 자원들이 보내짐
3. 브라우저는 해당 자원이 담긴 html, css를 W3C 명세에 따라 해석 => ``렌더링 엔진`` 역할
    - html 파싱 과정 => 어휘/구문 분석 => DOM 트리 구축
    - CSS 파싱 과정 => 모든 CSS 정보를 스타일 구조체로 생성
    - 두 가지를 연결시켜 렌더 트리로 만듦 => 문서가 시각적 요소를 포함한 형태로 구성된 상태
4. 화면에 배치를 시작하고 UI 백엔드가 노드를 돌며 형상을 그림
5. 기다리는 동시에 일부분 먼저 진행하고 화면에 표시
